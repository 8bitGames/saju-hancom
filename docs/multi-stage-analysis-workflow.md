# ë‹¨ê³„ë³„ ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì„¤ê³„ ë¬¸ì„œ

> ìš´ì„¸ ë§ˆìŠ¤í„° - ì „ë¬¸ì ì¸ ë‹¤ë‹¨ê³„ ë¶„ì„ ì‹œìŠ¤í…œ êµ¬ì¶• ê³„íš

---

## 1. í˜„ì¬ ë¬¸ì œì  ë¶„ì„

### 1.1 í˜„ì¬ êµ¬ì¡°ì˜ í•œê³„

```
í˜„ì¬: ë‹¨ì¼ API í˜¸ì¶œ â†’ í•œë²ˆì— ëª¨ë“  ë¶„ì„ â†’ ê²°ê³¼ ë°˜í™˜
```

| ë¬¸ì œì  | ì„¤ëª… |
|--------|------|
| **ë¶„ì„ ê¹Šì´ ë¶€ì¡±** | í•˜ë‚˜ì˜ í”„ë¡¬í”„íŠ¸ë¡œ ëª¨ë“  ì˜ì—­ì„ ë¶„ì„í•˜ë©´ ê° ì˜ì—­ë³„ ê¹Šì´ê°€ ì–•ì•„ì§ |
| **ì¼ê´€ì„± ë¶€ì¡±** | LLMì´ í•œë²ˆì— ë§ì€ ê²ƒì„ ë¶„ì„í•˜ë©´ ê²°ê³¼ í’ˆì§ˆì´ ë¶ˆì•ˆì • |
| **ë§¥ë½ ë‹¨ì ˆ** | ì´ì „ ë¶„ì„ ê²°ê³¼ê°€ ë‹¤ìŒ ë¶„ì„ì— ì˜í–¥ì„ ì£¼ì§€ ëª»í•¨ |
| **ì‹œê°í™” í•œê³„** | ë°ì´í„° êµ¬ì¡°ê°€ ë‹¨ìˆœí•´ì„œ í’ë¶€í•œ ì‹œê°í™” ì–´ë ¤ì›€ |

### 1.2 ëª©í‘œ ìƒíƒœ

```
ëª©í‘œ: ì…ë ¥ â†’ [1ë‹¨ê³„ ë¶„ì„] â†’ [2ë‹¨ê³„ ë¶„ì„] â†’ ... â†’ [ì¢…í•©] â†’ í’ë¶€í•œ ê²°ê³¼
```

- ê° ë‹¨ê³„ì—ì„œ ì „ë¬¸ì ì´ê³  ê¹Šì´ ìˆëŠ” ë¶„ì„
- ì´ì „ ë‹¨ê³„ ê²°ê³¼ë¥¼ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ í™œìš©
- êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë‹¤ì–‘í•œ ì‹œê°í™” ê°€ëŠ¥
- ì‚¬ìš©ìì—ê²Œ ë‹¨ê³„ë³„ ë¡œë”© ìƒíƒœ í‘œì‹œ ê°€ëŠ¥

---

## 2. ì „ì²´ ì•„í‚¤í…ì²˜

### 2.1 ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í´ë¼ì´ì–¸íŠ¸                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ì…ë ¥í¼  â”‚ â†’ â”‚ ë¶„ì„ ìš”ì²­    â”‚ â†’ â”‚ ê²°ê³¼ ì‹œê°í™”      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ë‹¨ê³„ë³„ ë¶„ì„ íŒŒì´í”„ë¼ì¸                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ Step 1 â”‚â†’â”‚ Step 2 â”‚â†’â”‚ Step 3 â”‚â†’â”‚ Step N â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì „ë¬¸ ë¶„ì„ ì—”ì§„                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ê¸°ì´ˆ ë¶„ì„   â”‚  â”‚ ì‹¬ì¸µ ë¶„ì„   â”‚  â”‚ ì¢…í•© ë¶„ì„   â”‚        â”‚
â”‚  â”‚ (êµ¬ì¡°í™”)    â”‚  â”‚ (í•´ì„)      â”‚  â”‚ (ì¡°ì–¸)      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ì´í„° íë¦„

```typescript
// ê° ë‹¨ê³„ë³„ ê²°ê³¼ê°€ ì¶•ì ë˜ì–´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì „ë‹¬
interface AnalysisPipeline<T> {
  step1Result: Step1Data;      // ê¸°ì´ˆ êµ¬ì¡° ë¶„ì„
  step2Result: Step2Data;      // í•µì‹¬ ìš”ì†Œ ë¶„ì„
  step3Result: Step3Data;      // ì‹¬ì¸µ í•´ì„
  step4Result: Step4Data;      // ìš´ì„¸/ì‹œê¸° ë¶„ì„
  finalResult: T;              // ì¢…í•© ê²°ê³¼
}
```

---

## 3. ì‚¬ì£¼ ìš´ì„¸ ë¶„ì„ íŒŒì´í”„ë¼ì¸

### 3.1 ë‹¨ê³„ êµ¬ì¡°

```
ì…ë ¥(ìƒë…„ì›”ì¼ì‹œ, ì„±ë³„)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: ê¸°ì´ˆ êµ¬ì¡° ë¶„ì„ (Foundation)      â”‚
â”‚ - ì‚¬ì£¼ ì›êµ­ êµ¬ì„±                         â”‚
â”‚ - ì˜¤í–‰ ì ìˆ˜ ê³„ì‚°                         â”‚
â”‚ - ì²œê°„/ì§€ì§€ ë°°ì—´                         â”‚
â”‚ Output: ì‚¬ì£¼ ê¸°ë³¸ ë°ì´í„° êµ¬ì¡°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: ì¼ê°„ ì‹¬ì¸µ ë¶„ì„ (Day Master)      â”‚
â”‚ - ì¼ê°„ íŠ¹ì„± ìƒì„¸ ë¶„ì„                    â”‚
â”‚ - ì›”ë ¹ ë¶„ì„ (ë“ë ¹/ì‹¤ë ¹)                  â”‚
â”‚ - í†µê·¼/íˆ¬ì¶œ ë¶„ì„                         â”‚
â”‚ - ì‹ ê°•/ì‹ ì•½ íŒë‹¨                         â”‚
â”‚ - ìš©ì‹ /í¬ì‹ /ê¸°ì‹  ë„ì¶œ                    â”‚
â”‚ Output: ì¼ê°„ ì„±í–¥ + ìš©ì‹  ì²´ê³„             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: ì‹­ì„± ë¶„ì„ (Ten Gods)             â”‚
â”‚ - ê° ì‹­ì„±ë³„ ê°œìˆ˜ì™€ ìœ„ì¹˜ ë¶„ì„             â”‚
â”‚ - ê²©êµ­ íŒë‹¨                             â”‚
â”‚ - ì„±ê²© íŠ¹ì„± ë„ì¶œ                         â”‚
â”‚ - ì§ì—… ì ì„± ë¶„ì„                         â”‚
â”‚ - ëŒ€ì¸ê´€ê³„ ìŠ¤íƒ€ì¼                        â”‚
â”‚ Output: ì„±ê²©/ì ì„±/ê´€ê³„ í”„ë¡œíŒŒì¼           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: ì‹ ì‚´ ë¶„ì„ (Special Stars)        â”‚
â”‚ - ê¸¸ì‹  íŒë³„ ë° ì˜í–¥ë ¥                    â”‚
â”‚ - í‰ì‹  íŒë³„ ë° ì£¼ì˜ì                     â”‚
â”‚ - ê° ì‹ ì‚´ì˜ í™œìš© ë°©ë²•                    â”‚
â”‚ Output: ì‹ ì‚´ ëª©ë¡ + í•´ì„ + í™œìš©ë²•         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: ëŒ€ìš´/ì„¸ìš´ ë¶„ì„ (Fortune Timing)  â”‚
â”‚ - í˜„ì¬ ëŒ€ìš´ ë¶„ì„                         â”‚
â”‚ - ì˜¬í•´ ì„¸ìš´ ë¶„ì„                         â”‚
â”‚ - ì›êµ­ê³¼ì˜ í•©ì¶© ê´€ê³„                     â”‚
â”‚ - ì›”ë³„ ì£¼ìš” í¬ì¸íŠ¸                       â”‚
â”‚ Output: í˜„ì¬ ìš´ì„¸ + íƒ€ì´ë° ì •ë³´           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: ì¢…í•© ë° ì¡°ì–¸ (Synthesis)         â”‚
â”‚ - ëª¨ë“  ë¶„ì„ ê²°ê³¼ ì¢…í•©                    â”‚
â”‚ - ìš°ì„ ìˆœìœ„í™”                             â”‚
â”‚ - ì‹¤ìš©ì  ì¡°ì–¸ ìƒì„±                       â”‚
â”‚ - í–‰ìš´ ìš”ì†Œ ë„ì¶œ                         â”‚
â”‚ Output: ìµœì¢… ê²°ê³¼ (ì ìˆ˜, ë“±ê¸‰, ì¡°ì–¸)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ê° ë‹¨ê³„ë³„ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

```typescript
// Step 1: ê¸°ì´ˆ êµ¬ì¡°
interface Step1_Foundation {
  pillars: {
    year: { stem: string; branch: string; element: string };
    month: { stem: string; branch: string; element: string };
    day: { stem: string; branch: string; element: string };
    time: { stem: string; branch: string; element: string };
  };
  elementScores: {
    wood: number;
    fire: number;
    earth: number;
    metal: number;
    water: number;
  };
  stemBranchRelations: string[];  // ì²œê°„/ì§€ì§€ ê´€ê³„
}

// Step 2: ì¼ê°„ ë¶„ì„
interface Step2_DayMaster {
  dayMaster: string;
  dayMasterElement: string;
  characteristics: string[];
  monthlyInfluence: "ë“ë ¹" | "ì‹¤ë ¹";
  rootStrength: number;  // í†µê·¼ ê°•ë„
  manifestation: string[];  // íˆ¬ì¶œ ìƒíƒœ
  bodyStrength: "ì‹ ê°•" | "ì‹ ì•½" | "ì¤‘í™”";
  usefulGod: {
    primary: string;     // ìš©ì‹ 
    supporting: string;  // í¬ì‹ 
    avoiding: string;    // ê¸°ì‹ 
    reasoning: string;   // ìš©ì‹  ì„ ì • ì´ìœ 
  };
}

// Step 3: ì‹­ì„± ë¶„ì„
interface Step3_TenGods {
  tenGodsCounts: Record<string, number>;
  dominantGods: string[];
  structure: string;  // ê²©êµ­
  personality: {
    traits: string[];
    strengths: string[];
    weaknesses: string[];
    description: string;
  };
  careerAptitude: {
    suitableFields: string[];
    workStyle: string;
    leadershipStyle: string;
  };
  relationshipStyle: {
    socialPattern: string;
    loveStyle: string;
    familyRole: string;
  };
}

// Step 4: ì‹ ì‚´ ë¶„ì„
interface Step4_SpecialStars {
  auspiciousStars: Array<{
    name: string;
    koreanName: string;
    meaning: string;
    influence: string;
    howToUse: string;
  }>;
  inauspiciousStars: Array<{
    name: string;
    koreanName: string;
    meaning: string;
    caution: string;
    positiveUse: string;
  }>;
  overallStarInfluence: string;
}

// Step 5: ëŒ€ìš´/ì„¸ìš´ ë¶„ì„
interface Step5_FortuneTiming {
  currentMajorFortune: {
    period: string;
    element: string;
    theme: string;
    influence: string;
  };
  yearlyFortune: {
    year: number;
    element: string;
    interaction: string;  // ì›êµ­ê³¼ì˜ ê´€ê³„
    opportunities: string[];
    challenges: string[];
  };
  monthlyHighlights: Array<{
    month: number;
    rating: "excellent" | "good" | "normal" | "caution";
    description: string;
  }>;
}

// Step 6: ì¢…í•© ê²°ê³¼
interface Step6_Synthesis {
  overallScore: number;
  overallGrade: string;
  summary: string;

  // ì˜ì—­ë³„ ì¢…í•©
  areas: {
    personality: { score: number; summary: string };
    career: { score: number; summary: string };
    wealth: { score: number; summary: string };
    relationship: { score: number; summary: string };
    health: { score: number; summary: string };
  };

  // í•µì‹¬ ë©”ì‹œì§€
  keyInsights: string[];

  // ì‹¤ìš©ì  ì¡°ì–¸
  advice: {
    immediate: string[];    // ì¦‰ì‹œ í•  ìˆ˜ ìˆëŠ” ê²ƒ
    shortTerm: string[];    // ë‹¨ê¸° ì¡°ì–¸
    longTerm: string[];     // ì¥ê¸° ì¡°ì–¸
  };

  // í–‰ìš´ ìš”ì†Œ
  luckyElements: {
    colors: string[];
    numbers: number[];
    directions: string[];
    activities: string[];
  };
}
```

### 3.3 API êµ¬ì¡° ì„¤ê³„

```typescript
// Option A: ìˆœì°¨ì  API í˜¸ì¶œ (í´ë¼ì´ì–¸íŠ¸ ì£¼ë„)
// ì¥ì : ë‹¨ê³„ë³„ ë¡œë”© í‘œì‹œ ê°€ëŠ¥, ì¤‘ê°„ ê²°ê³¼ ìºì‹± ê°€ëŠ¥
// ë‹¨ì : ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œ, í´ë¼ì´ì–¸íŠ¸ ë³µì¡ë„ ì¦ê°€

POST /api/saju/analyze/step1  â†’ Step1_Foundation
POST /api/saju/analyze/step2  â†’ Step2_DayMaster (requires step1)
POST /api/saju/analyze/step3  â†’ Step3_TenGods (requires step1, step2)
POST /api/saju/analyze/step4  â†’ Step4_SpecialStars (requires step1)
POST /api/saju/analyze/step5  â†’ Step5_FortuneTiming (requires step1, step2)
POST /api/saju/analyze/step6  â†’ Step6_Synthesis (requires all)

// Option B: ì„œë²„ ì‚¬ì´ë“œ íŒŒì´í”„ë¼ì¸ (ì„œë²„ ì£¼ë„)
// ì¥ì : ë‹¨ìˆœí•œ í´ë¼ì´ì–¸íŠ¸, ìµœì í™”ëœ ì‹¤í–‰
// ë‹¨ì : ê¸´ ì‘ë‹µ ì‹œê°„, ì¤‘ê°„ ê²°ê³¼ í™•ì¸ ì–´ë ¤ì›€

POST /api/saju/analyze/full â†’ CompleteAnalysisResult

// Option C: ìŠ¤íŠ¸ë¦¬ë° API (í•˜ì´ë¸Œë¦¬ë“œ) â­ ê¶Œì¥
// ì¥ì : ë‹¨ê³„ë³„ ê²°ê³¼ ì‹¤ì‹œê°„ ì „ë‹¬, ì‚¬ìš©ì ê²½í—˜ ìš°ìˆ˜
// ë‹¨ì : êµ¬í˜„ ë³µì¡ë„

POST /api/saju/analyze/stream â†’ Server-Sent Events
  event: step1_complete â†’ Step1_Foundation
  event: step2_complete â†’ Step2_DayMaster
  ...
  event: analysis_complete â†’ Step6_Synthesis
```

---

## 4. ê´€ìƒ ë¶„ì„ íŒŒì´í”„ë¼ì¸

### 4.1 ë‹¨ê³„ êµ¬ì¡°

```
ì…ë ¥(ì–¼êµ´ ì´ë¯¸ì§€, ì„±ë³„)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: ì–¼êµ´ êµ¬ì¡° ê°ì§€ (Detection)       â”‚
â”‚ - ì–¼êµ´í˜• ë¶„ë¥˜ (ì˜¤í–‰ ê¸°ì¤€)                â”‚
â”‚ - ì‚¼ì • ë¹„ìœ¨ ì¸¡ì •                         â”‚
â”‚ - ì£¼ìš” íŠ¹ì§•ì  ì‹ë³„                       â”‚
â”‚ Output: ì–¼êµ´ êµ¬ì¡° ë°ì´í„°                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: ì‚¼ì • ë¶„ì„ (Three Sections)       â”‚
â”‚ - ìƒì •(ì´ë§ˆ) ìƒì„¸ ë¶„ì„                   â”‚
â”‚ - ì¤‘ì •(ëˆˆ~ì½”) ìƒì„¸ ë¶„ì„                  â”‚
â”‚ - í•˜ì •(ì…~í„±) ìƒì„¸ ë¶„ì„                  â”‚
â”‚ - ì‚¼ì • ê· í˜• í‰ê°€                         â”‚
â”‚ Output: ì‚¼ì •ë³„ ë¶„ì„ ê²°ê³¼                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: ì˜¤ê´€ ë¶„ì„ (Five Features)        â”‚
â”‚ - ê·€ ë¶„ì„                               â”‚
â”‚ - ëˆˆì¹ ë¶„ì„                             â”‚
â”‚ - ëˆˆ ë¶„ì„ (50% ê°€ì¤‘ì¹˜)                   â”‚
â”‚ - ì½” ë¶„ì„                               â”‚
â”‚ - ì… ë¶„ì„                               â”‚
â”‚ Output: ì˜¤ê´€ë³„ ë¶„ì„ ê²°ê³¼                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: ìš´ì„¸ ì˜ì—­ ë¶„ì„ (Fortune Areas)   â”‚
â”‚ - ì¬ë¬¼ìš´                                â”‚
â”‚ - ì§ì—…ìš´                                â”‚
â”‚ - ëŒ€ì¸ê´€ê³„                              â”‚
â”‚ - ê±´ê°•ìš´                                â”‚
â”‚ - ì• ì •ìš´                                â”‚
â”‚ Output: ì˜ì—­ë³„ ìš´ì„¸ ì ìˆ˜ + í•´ì„           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: ì¢…í•© ë° ì¡°ì–¸ (Synthesis)         â”‚
â”‚ - ê°•ì  ë„ì¶œ                             â”‚
â”‚ - ì£¼ì˜ì  ë„ì¶œ                           â”‚
â”‚ - ë³´ì™„ ë°©ë²• ì œì‹œ                         â”‚
â”‚ - í–‰ìš´ ìš”ì†Œ ë„ì¶œ                         â”‚
â”‚ Output: ìµœì¢… ê²°ê³¼                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ê° ë‹¨ê³„ë³„ ìŠ¤í‚¤ë§ˆ

```typescript
// Step 1: ì–¼êµ´ êµ¬ì¡° ê°ì§€
interface FaceStep1_Detection {
  faceShape: {
    type: "wood" | "fire" | "earth" | "metal" | "water";
    koreanName: string;
    confidence: number;
    description: string;
  };
  threeSecionsRatio: {
    upper: number;   // ìƒì • ë¹„ìœ¨
    middle: number;  // ì¤‘ì • ë¹„ìœ¨
    lower: number;   // í•˜ì • ë¹„ìœ¨
    balance: "ê· í˜•" | "ìƒì •ìš°ì„¸" | "ì¤‘ì •ìš°ì„¸" | "í•˜ì •ìš°ì„¸";
  };
  overallImpression: string;
}

// Step 2: ì‚¼ì • ë¶„ì„
interface FaceStep2_ThreeSections {
  upperSection: {
    width: "ë„“ìŒ" | "ë³´í†µ" | "ì¢ìŒ";
    shape: string;
    surface: string;  // í‰í„°, ì£¼ë¦„ ë“±
    score: number;
    fortune: string;  // ì´ˆë…„ìš´ í•´ì„
    parentFortune: string;  // ë¶€ëª¨ìš´
    wisdom: string;  // ì§€í˜œ
  };
  middleSection: {
    eyes: {
      clarity: string;
      shape: string;
      balance: string;
    };
    nose: {
      height: string;
      shape: string;
      nostrilVisibility: string;
    };
    score: number;
    fortune: string;  // ì¤‘ë…„ìš´ í•´ì„
    wealthIndicator: string;
  };
  lowerSection: {
    mouth: {
      corners: "ì˜¬ë¼ê°" | "ìˆ˜í‰" | "ë‚´ë ¤ê°";
      size: string;
      lips: string;
    };
    chin: {
      shape: string;
      strength: string;
    };
    score: number;
    fortune: string;  // ë§ë…„ìš´ í•´ì„
    foodFortune: string;
  };
  balanceAnalysis: string;
}

// Step 3: ì˜¤ê´€ ë¶„ì„
interface FaceStep3_FiveFeatures {
  ears: {
    shape: string;
    thickness: string;
    position: string;
    lobe: string;
    score: number;
    earlyLifeFortune: string;
    wisdomIndicator: string;
  };
  eyebrows: {
    shape: string;
    density: string;
    length: string;
    score: number;
    siblingFortune: string;
    emotionalControl: string;
  };
  eyes: {
    shape: string;
    clarity: string;
    size: string;
    balance: string;
    score: number;  // ê°€ì¤‘ì¹˜ 50%
    personality: string;
    currentFortune: string;
    intelligence: string;
  };
  nose: {
    bridge: string;
    tip: string;
    wings: string;
    nostrils: string;
    score: number;
    wealthFortune: string;
    selfEsteem: string;
    health: string;
  };
  mouth: {
    shape: string;
    size: string;
    lips: string;
    corners: string;
    score: number;
    speech: string;
    vitality: string;
    affection: string;
  };
}

// Step 4: ìš´ì„¸ ì˜ì—­ ë¶„ì„
interface FaceStep4_FortuneAreas {
  wealth: {
    score: number;
    indicators: string[];
    description: string;
    enhancement: string;
  };
  career: {
    score: number;
    suitableFields: string[];
    description: string;
    enhancement: string;
  };
  relationship: {
    score: number;
    socialStyle: string;
    description: string;
    enhancement: string;
  };
  health: {
    score: number;
    weakPoints: string[];
    description: string;
    enhancement: string;
  };
  love: {
    score: number;
    loveStyle: string;
    description: string;
    enhancement: string;
  };
}

// Step 5: ì¢…í•© ê²°ê³¼
interface FaceStep5_Synthesis {
  overallScore: number;
  overallGrade: string;
  gradeText: string;

  summary: string;

  strengths: Array<{
    area: string;
    description: string;
    howToLeverage: string;
  }>;

  areasToImprove: Array<{
    area: string;
    description: string;
    compensationMethod: string;
  }>;

  practicalAdvice: string[];

  luckyElements: {
    colors: string[];
    directions: string[];
    numbers: number[];
    accessories: string[];  // ì•ˆê²½, í—¤ì–´ìŠ¤íƒ€ì¼ ë“±
  };
}
```

---

## 5. ê¶í•© ë¶„ì„ íŒŒì´í”„ë¼ì¸

### 5.1 ë‹¨ê³„ êµ¬ì¡°

```
ì…ë ¥(ë‘ ì‚¬ëŒì˜ ì‚¬ì£¼ ë°ì´í„°, ê´€ê³„ ìœ í˜•)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: ê°œë³„ ë¶„ì„ (Individual Analysis)  â”‚
â”‚ - Person 1 ê¸°ë³¸ ë¶„ì„                     â”‚
â”‚ - Person 2 ê¸°ë³¸ ë¶„ì„                     â”‚
â”‚ - ê°ìì˜ ì¼ê°„, ì˜¤í–‰, ì‹­ì„± íŒŒì•…            â”‚
â”‚ Output: ê°œë³„ í”„ë¡œíŒŒì¼ 2ê°œ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: ì²œê°„ ê´€ê³„ ë¶„ì„ (Stem Relations)  â”‚
â”‚ - ì¼ê°„ ëŒ€ ì¼ê°„ ê´€ê³„                      â”‚
â”‚ - ì²œê°„í•© ì—¬ë¶€                           â”‚
â”‚ - ìƒìƒ/ìƒê·¹ ê´€ê³„                         â”‚
â”‚ Output: ì²œê°„ ê¶í•© ë¶„ì„                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: ì§€ì§€ ê´€ê³„ ë¶„ì„ (Branch Relations)â”‚
â”‚ - ì‚¼í•© ì—¬ë¶€                             â”‚
â”‚ - ìœ¡í•© ì—¬ë¶€                             â”‚
â”‚ - ì¶©/í˜•/íŒŒ/í•´ ì—¬ë¶€                       â”‚
â”‚ Output: ì§€ì§€ ê¶í•© ë¶„ì„                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: ì˜¤í–‰ ì¡°í™” ë¶„ì„ (Element Harmony) â”‚
â”‚ - ì˜¤í–‰ ê· í˜• ë¹„êµ                         â”‚
â”‚ - ìƒí˜¸ ë³´ì™„ ê´€ê³„                         â”‚
â”‚ - ê²°í•/ê³¼ë‹¤ ë³´ì™„ ì—¬ë¶€                    â”‚
â”‚ Output: ì˜¤í–‰ ì¡°í™” ë¶„ì„                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: ê´€ê³„ ìœ í˜•ë³„ ë¶„ì„ (Context)       â”‚
â”‚ - ê´€ê³„ ìœ í˜•ì— ë§ëŠ” ë¶„ì„ ì ìš©             â”‚
â”‚ - ë¹„ì¦ˆë‹ˆìŠ¤/ë™ë£Œ ê´€ì  í•´ì„                â”‚
â”‚ - ì—­í•  ë¶„ë‹´ ì œì•ˆ                         â”‚
â”‚ Output: ê´€ê³„ ìœ í˜•ë³„ ê¶í•© ë¶„ì„             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: ì¢…í•© ë° ì¡°ì–¸ (Synthesis)         â”‚
â”‚ - ì¢…í•© ê¶í•© ì ìˆ˜                         â”‚
â”‚ - ê°•ì ê³¼ ë„ì „ ê³¼ì œ                       â”‚
â”‚ - ê´€ê³„ ë°œì „ ì¡°ì–¸                         â”‚
â”‚ - í•¨ê»˜í•˜ë©´ ì¢‹ì€ í™œë™                     â”‚
â”‚ Output: ìµœì¢… ê¶í•© ê²°ê³¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ê²°ê³¼ ì‹œê°í™” ì „ëµ

### 6.1 ì‹œê°í™” ì»´í¬ë„ŒíŠ¸

```typescript
// 1. ì ìˆ˜ ê²Œì´ì§€
interface ScoreGauge {
  score: number;
  maxScore: number;
  grade: string;
  color: string;
  animated: boolean;
}

// 2. ì˜¤í–‰ ì°¨íŠ¸ (ë ˆì´ë” ì°¨íŠ¸)
interface ElementChart {
  wood: number;
  fire: number;
  earth: number;
  metal: number;
  water: number;
  balance: number;
}

// 3. ì‚¼ì • ë¹„ìœ¨ ë°”
interface ThreeSectionBar {
  upper: { score: number; label: string };
  middle: { score: number; label: string };
  lower: { score: number; label: string };
}

// 4. íƒ€ì„ë¼ì¸ (ìš´ì„¸ íë¦„)
interface FortuneTimeline {
  periods: Array<{
    label: string;
    startAge: number;
    endAge: number;
    fortune: "excellent" | "good" | "normal" | "caution";
    description: string;
  }>;
  currentPosition: number;
}

// 5. ê¶í•© ë§¤ì¹­ ë‹¤ì´ì–´ê·¸ë¨
interface CompatibilityDiagram {
  person1: PersonProfile;
  person2: PersonProfile;
  connections: Array<{
    type: "í•©" | "ìƒ" | "ê·¹" | "ì¶©";
    from: string;
    to: string;
    strength: number;
  }>;
}

// 6. ì¹´ë“œ ê·¸ë¦¬ë“œ (ì‹­ì„±, ì‹ ì‚´ ë“±)
interface CardGrid {
  cards: Array<{
    title: string;
    icon: string;
    value: string | number;
    description: string;
    color: string;
  }>;
}

// 7. ì›”ë³„ ìš´ì„¸ ìº˜ë¦°ë”
interface MonthlyCalendar {
  months: Array<{
    month: number;
    rating: 1 | 2 | 3 | 4 | 5;
    highlight: string;
    advice: string;
  }>;
}
```

### 6.2 ë‹¨ê³„ë³„ ë¡œë”© UX

```typescript
// ë¶„ì„ ì§„í–‰ ìƒíƒœ í‘œì‹œ
interface AnalysisProgress {
  totalSteps: number;
  currentStep: number;
  stepName: string;
  stepDescription: string;
  estimatedTimeRemaining: number;
  completedSteps: Array<{
    name: string;
    summary: string;
  }>;
}

// ë¡œë”© í™”ë©´ ì‹œí€€ìŠ¤
const loadingSequence = [
  { step: 1, message: "ì‚¬ì£¼ ì›êµ­ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...", icon: "ğŸ”®" },
  { step: 2, message: "ì¼ê°„ì˜ íŠ¹ì„±ì„ íŒŒì•…í•˜ê³  ìˆìŠµë‹ˆë‹¤...", icon: "â˜¯ï¸" },
  { step: 3, message: "ì‹­ì„±ì˜ ì¡°í™”ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...", icon: "â­" },
  { step: 4, message: "ì‹ ì‚´ì„ í•´ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...", icon: "ğŸŒŸ" },
  { step: 5, message: "ì˜¬í•´ ìš´ì„¸ë¥¼ ì‚´í´ë³´ê³  ìˆìŠµë‹ˆë‹¤...", icon: "ğŸ“…" },
  { step: 6, message: "ì¢…í•© ë¶„ì„ì„ ì™„ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...", icon: "âœ¨" },
];
```

---

## 7. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (Week 1-2)

1. **ì‚¬ì£¼ ë¶„ì„ íŒŒì´í”„ë¼ì¸ êµ¬í˜„**
   - Step 1-6 API ì—”ë“œí¬ì¸íŠ¸
   - ê° ë‹¨ê³„ë³„ Zod ìŠ¤í‚¤ë§ˆ
   - ì „ë¬¸í™”ëœ í”„ë¡¬í”„íŠ¸

2. **ì„œë²„ ì‚¬ì´ë“œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°**
   - íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ë¡œì§
   - ë‹¨ê³„ë³„ ê²°ê³¼ ì¶•ì 
   - ì—ëŸ¬ í•¸ë“¤ë§

### Phase 2: í´ë¼ì´ì–¸íŠ¸ í†µí•© (Week 2-3)

1. **ìŠ¤íŠ¸ë¦¬ë° API êµ¬í˜„**
   - Server-Sent Events ì„¤ì •
   - ë‹¨ê³„ë³„ ê²°ê³¼ ì „ì†¡

2. **í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬**
   - ë‹¨ê³„ë³„ ê²°ê³¼ ì €ì¥
   - í”„ë¡œê·¸ë ˆìŠ¤ í‘œì‹œ

### Phase 3: ì‹œê°í™” ê³ ë„í™” (Week 3-4)

1. **ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ ê°œë°œ**
   - ì˜¤í–‰ ë ˆì´ë” ì°¨íŠ¸
   - ì ìˆ˜ ê²Œì´ì§€
   - íƒ€ì„ë¼ì¸

2. **ì¸í„°ë™í‹°ë¸Œ ê²°ê³¼ í˜ì´ì§€**
   - íƒ­ë³„ ìƒì„¸ ì •ë³´
   - ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼

### Phase 4: ê´€ìƒ/ê¶í•© íŒŒì´í”„ë¼ì¸ (Week 4-5)

1. **ê´€ìƒ ë¶„ì„ íŒŒì´í”„ë¼ì¸**
2. **ê¶í•© ë¶„ì„ íŒŒì´í”„ë¼ì¸**
3. **í†µí•© í…ŒìŠ¤íŠ¸ ë° ìµœì í™”**

---

## 8. ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### 8.1 ì„±ëŠ¥ ìµœì í™”

```typescript
// ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥í•œ ë‹¨ê³„
const parallelSteps = {
  saju: [
    ["step1"],           // ê¸°ì´ˆ (í•„ìˆ˜ ì„ í–‰)
    ["step2", "step4"],  // ì¼ê°„ë¶„ì„, ì‹ ì‚´ë¶„ì„ (ë³‘ë ¬ ê°€ëŠ¥)
    ["step3"],           // ì‹­ì„±ë¶„ì„ (step2 í•„ìš”)
    ["step5"],           // ëŒ€ìš´ì„¸ìš´ (step1,2 í•„ìš”)
    ["step6"],           // ì¢…í•© (ëª¨ë“  ë‹¨ê³„ í•„ìš”)
  ]
};

// ìºì‹± ì „ëµ
const cacheStrategy = {
  step1: "24h",     // ê¸°ì´ˆ ë°ì´í„°ëŠ” ë³€í•˜ì§€ ì•ŠìŒ
  step2: "24h",     // ì¼ê°„ ë¶„ì„ë„ ê³ ì •
  step3: "24h",     // ì‹­ì„± ë¶„ì„ë„ ê³ ì •
  step4: "24h",     // ì‹ ì‚´ ë¶„ì„ë„ ê³ ì •
  step5: "1h",      // ìš´ì„¸ëŠ” ìƒëŒ€ì ìœ¼ë¡œ ì§§ê²Œ
  step6: "1h",      // ì¢…í•©ë„ ìš´ì„¸ ì˜ì¡´
};
```

### 8.2 ì—ëŸ¬ í•¸ë“¤ë§

```typescript
// ë‹¨ê³„ë³„ ì—ëŸ¬ ë³µêµ¬
const errorRecovery = {
  step1: "retry",        // ê¸°ì´ˆ ë¶„ì„ ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„
  step2: "fallback",     // ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´
  step3: "skip",         // ìƒëµí•˜ê³  ì§„í–‰
  step4: "skip",         // ìƒëµí•˜ê³  ì§„í–‰
  step5: "fallback",     // ê¸°ë³¸ ìš´ì„¸ë¡œ ëŒ€ì²´
  step6: "partial",      // ìˆëŠ” ë°ì´í„°ë¡œ ì¢…í•©
};
```

### 8.3 ë¹„ìš© ê´€ë¦¬

```typescript
// í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”
const tokenBudget = {
  step1: 500,   // êµ¬ì¡°í™”ëœ ë°ì´í„°ë§Œ
  step2: 1000,  // ìƒì„¸ ë¶„ì„
  step3: 1500,  // ê°€ì¥ ìƒì„¸
  step4: 800,   // ì‹ ì‚´ í•´ì„
  step5: 1000,  // ìš´ì„¸ ë¶„ì„
  step6: 1200,  // ì¢…í•©
  total: 6000,  // ì „ì²´ ì˜ˆì‚°
};
```

---

## 9. ë‹¤ìŒ ë‹¨ê³„

ì´ ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ:

1. **ì‚¬ì£¼ ë¶„ì„ íŒŒì´í”„ë¼ì¸**ë¶€í„° êµ¬í˜„ ì‹œì‘
2. ê° ë‹¨ê³„ë³„ API ì—”ë“œí¬ì¸íŠ¸ ê°œë°œ
3. í´ë¼ì´ì–¸íŠ¸ ìŠ¤íŠ¸ë¦¬ë° ì—°ë™
4. ì‹œê°í™” ì»´í¬ë„ŒíŠ¸ ê°œë°œ
5. ê´€ìƒ/ê¶í•© íŒŒì´í”„ë¼ì¸ í™•ì¥

---

## ë¬¸ì„œ ì •ë³´

- **ì‘ì„±ì¼**: 2025ë…„ 12ì›” 20ì¼
- **ë²„ì „**: 1.0
- **ëª©ì **: ë‹¤ë‹¨ê³„ ë¶„ì„ ì‹œìŠ¤í…œ ì„¤ê³„ ë° êµ¬í˜„ ê³„íš
