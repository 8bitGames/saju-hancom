{
  "master": {
    "tasks": [
      {
        "id": "1",
        "title": "Project Setup and Dependencies Installation",
        "description": "Initialize the Next.js project with all required dependencies and basic configuration",
        "details": "Install Next.js 16.1.0 with App Router, TypeScript 5.x, React 19.2.3, and Tailwind CSS v4. Install core dependencies: lunar-javascript (사주 계산), ai and @ai-sdk/openai (Vercel AI SDK), zustand (state management), shadcn/ui components, recharts (charts), lucide-react (icons), @mediapipe/face_mesh (face detection), react-webcam (camera), @supabase/supabase-js (database). Create .env.example with required environment variables (OPENAI_API_KEY, NEXT_PUBLIC_SUPABASE_URL, etc.). Set up Tailwind config with custom 오행 colors (wood: #22c55e, fire: #ef4444, earth: #eab308, metal: #f8fafc, water: #3b82f6).",
        "testStrategy": "Verify all packages install without conflicts, Next.js dev server starts successfully, TypeScript compilation works, and Tailwind classes render correctly with custom colors.",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Initialize Next.js Project with Core Framework",
            "description": "Create new Next.js 16.1.0 project with App Router, TypeScript 5.x, and React 19.2.3 configuration",
            "dependencies": [],
            "details": "Run create-next-app with TypeScript template, configure Next.js 16.1.0 with App Router enabled, set up TypeScript 5.x configuration with strict mode, and ensure React 19.2.3 compatibility. Configure next.config.js for optimal performance and bundle optimization.",
            "status": "pending",
            "testStrategy": "Verify Next.js dev server starts without errors, TypeScript compilation works correctly, and App Router structure is properly configured",
            "parentId": "undefined"
          },
          {
            "id": 2,
            "title": "Install and Configure Tailwind CSS v4",
            "description": "Set up Tailwind CSS v4 with custom 오행 color scheme and responsive design configuration",
            "dependencies": [
              1
            ],
            "details": "Install Tailwind CSS v4, configure tailwind.config.js with custom 오행 colors (wood: #22c55e, fire: #ef4444, earth: #eab308, metal: #f8fafc, water: #3b82f6), set up responsive breakpoints, and configure PostCSS integration with Next.js.",
            "status": "pending",
            "testStrategy": "Test custom color classes render correctly, verify responsive utilities work across devices, and ensure Tailwind purging works properly in production builds",
            "parentId": "undefined"
          },
          {
            "id": 3,
            "title": "Install Core Application Dependencies",
            "description": "Install all required npm packages for 사주 calculation, AI integration, state management, and UI components",
            "dependencies": [
              2
            ],
            "details": "Install lunar-javascript for 사주 calculations, ai and @ai-sdk/openai for Vercel AI SDK, zustand for state management, shadcn/ui components library, recharts for data visualization, lucide-react for icons, and @supabase/supabase-js for database connectivity. Verify version compatibility and resolve any dependency conflicts.",
            "status": "pending",
            "testStrategy": "Verify all packages install without conflicts, check import statements work correctly, and ensure no version compatibility issues exist between dependencies",
            "parentId": "undefined"
          },
          {
            "id": 4,
            "title": "Install Specialized Dependencies for Face Analysis",
            "description": "Install MediaPipe Face Mesh, camera utilities, and other specialized packages for 관상 analysis",
            "dependencies": [
              3
            ],
            "details": "Install @mediapipe/face_mesh for facial landmark detection, react-webcam for camera capture functionality, and any additional computer vision utilities. Configure dynamic imports for bundle optimization and ensure proper TypeScript definitions are available.",
            "status": "pending",
            "testStrategy": "Test MediaPipe Face Mesh initialization, verify camera access permissions work correctly, and ensure dynamic imports don't break the build process",
            "parentId": "undefined"
          },
          {
            "id": 5,
            "title": "Configure Environment Variables and Project Settings",
            "description": "Create environment configuration files and set up project-wide settings for API keys and database connections",
            "dependencies": [
              4
            ],
            "details": "Create .env.example with required environment variables (OPENAI_API_KEY, NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY, etc.), set up .env.local for development, configure TypeScript paths in tsconfig.json for clean imports, and set up ESLint and Prettier configurations for code quality.",
            "status": "pending",
            "testStrategy": "Verify environment variables load correctly in both development and production, test TypeScript path aliases work properly, and ensure linting rules are applied consistently",
            "parentId": "undefined"
          }
        ],
        "updatedAt": "2025-12-20T04:36:55.719Z"
      },
      {
        "id": "2",
        "title": "Directory Structure and Type Definitions",
        "description": "Create the complete directory structure and TypeScript type definitions for the application",
        "details": "Create directory structure: app/(main)/, components/{ui,saju,face,chat,layout}/, lib/{saju,face,prompts,supabase,store,utils}/. Define core TypeScript interfaces in lib/saju/types.ts: SajuInput, SajuResult, Pillar, TenGod, Element types. Define face analysis types in lib/face/types.ts: FaceMeasurements, landmark indices. Create constants file lib/saju/constants.ts with 천간 (Heavenly Stems), 지지 (Earthly Branches), 오행 mappings, 십성 relationships, and 신살 conditions.",
        "testStrategy": "Verify all directories exist, TypeScript types compile without errors, and constants are properly typed and accessible throughout the application.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T04:39:46.260Z"
      },
      {
        "id": "3",
        "title": "Core Saju Calculation Engine",
        "description": "Implement the core 사주팔자 calculation logic using lunar-javascript with 진태양시 correction",
        "details": "Implement lib/saju/solar-time.ts with adjustToTrueSolarTime() function for longitude-based time correction (Seoul default: 127.5°, offset ~30 minutes). Create lib/saju/calculator.ts with main calculateSaju() function integrating lunar-javascript: convert input date to Solar object, apply true solar time correction, extract 년주/월주/일주/시주 using lunar.getYearInGanZhi(), getMonthInGanZhi(), getDayInGanZhi(), getTimeInGanZhi(). Implement lib/saju/elements.ts for 오행 score calculation with proper weighting for 천간/지지/장간. Create comprehensive test cases with known celebrity birth data for validation.",
        "testStrategy": "Test with known 사주 data from reliable 만세력 sources, verify 진태양시 correction accuracy, validate 오행 scores sum to reasonable totals, and ensure lunar-javascript integration works correctly for various date ranges (1900-2100).",
        "priority": "high",
        "dependencies": [
          "2"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T04:39:47.833Z"
      },
      {
        "id": "4",
        "title": "Ten Gods and Stars Calculation",
        "description": "Implement 십성 (Ten Gods) and 신살 (Stars) calculation based on the day master",
        "details": "Create lib/saju/ten-gods.ts with calculateTenGods() function that determines relationships between day master (일간) and other pillars: 비견/겁재 (same element), 식신/상관 (day master produces), 편재/정재 (day master controls), 편관/정관 (controls day master), 편인/정인 (produces day master). Implement lib/saju/stars.ts with calculateStars() function for major 신살: 천을귀인, 도화살, 역마살, 공망 etc. Use traditional calculation methods based on day/year branches and specific combinations. Return structured analysis with dominant/lacking 십성 and auspicious/inauspicious stars.",
        "testStrategy": "Validate 십성 calculations against traditional 명리학 references, test edge cases with different day masters, verify 신살 detection accuracy with known examples, and ensure proper categorization of auspicious vs inauspicious influences.",
        "priority": "medium",
        "dependencies": [
          "3"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T04:47:37.460Z"
      },
      {
        "id": "5",
        "title": "Responsive UI Layout and Basic Components",
        "description": "Create mobile-first responsive layout with shadcn/ui components and 오행-themed styling",
        "details": "Set up shadcn/ui CLI and install core components: Button, Card, Input, Select, Dialog, Tabs, Switch, RadioGroup. Create app/(main)/layout.tsx with mobile-first design (max-width: 448px centered), gradient background (slate-900 to slate-800), Header and MobileNav components. Implement components/layout/header.tsx with app title and navigation, components/layout/mobile-nav.tsx with bottom fixed navigation. Apply 음양오행 color scheme throughout with CSS custom properties. Ensure touch-friendly design with minimum 44px touch targets and proper spacing.",
        "testStrategy": "Test responsive behavior across breakpoints (375px mobile, 768px tablet, 1024px desktop), verify touch targets meet accessibility standards, validate color contrast ratios, and ensure navigation works on mobile devices.",
        "priority": "medium",
        "dependencies": [
          "2"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T05:00:37.422Z"
      },
      {
        "id": "6",
        "title": "Birth Input Form with Validation",
        "description": "Create comprehensive birth date/time input form with lunar calendar support and validation",
        "details": "Implement components/saju/birth-input-form.tsx with year (1900-2100), month (1-12), day (1-31 dynamic based on month), hour (0-23), minute (0-59) selectors. Add 음력/양력 toggle switch, 윤달 checkbox (when lunar selected), gender radio buttons, and optional longitude input for 진태양시 correction. Use react-hook-form with zod validation schema. Implement proper date validation (leap years, month-specific day limits). Style with Tailwind classes and 오행 accent colors. Add loading state during form submission.",
        "testStrategy": "Test form validation with invalid dates (Feb 30, etc.), verify lunar calendar toggle functionality, validate all input combinations, test form submission with loading states, and ensure proper error messaging for invalid inputs.",
        "priority": "medium",
        "dependencies": [
          "5"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T05:00:38.857Z"
      },
      {
        "id": "7",
        "title": "Saju Display Components",
        "description": "Create visual components to display 사주팔자 results with 오행 color coding",
        "details": "Implement components/saju/pillar-card.tsx for individual pillar display with 천간 (top) and 지지 (bottom), 오행-based background colors, and Korean pronunciation. Create components/saju/four-pillars.tsx with horizontal card layout for 년주/월주/일주/시주. Build components/saju/element-chart.tsx using Recharts PieChart in donut style with 오행 distribution, custom colors, and center icon for dominant element. Implement components/saju/ten-gods-table.tsx with grid layout showing 십성 distribution. Create components/saju/fortune-result.tsx as main container integrating all display components.",
        "testStrategy": "Verify 오행 colors display correctly for each element, test chart responsiveness and data accuracy, validate 십성 table layout and content, ensure proper Korean text rendering, and test component integration in result container.",
        "priority": "medium",
        "dependencies": [
          "4",
          "5"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-20T05:00:40.923Z"
      },
      {
        "id": "8",
        "title": "AI Fortune Generation API",
        "description": "Implement OpenAI integration with streaming for personalized fortune telling",
        "details": "Create app/api/chat/route.ts using Vercel AI SDK with OpenAI GPT-4o model. Implement lib/prompts/fortune.ts with comprehensive system prompt for 30-year expert 명리학 persona, emphasizing positive guidance and practical advice. Build buildUserPrompt() function that converts SajuResult into structured prompt with 일간, 사주팔자, 오행 scores, dominant 십성, and major 신살. Support category-specific analysis (general, love, career, wealth, health). Configure streaming with temperature 0.7, max tokens 2000. Include proper error handling and rate limiting.",
        "testStrategy": "Test API endpoint with various saju data combinations, verify streaming functionality works correctly, validate prompt engineering produces coherent Korean responses, test different category analyses, and ensure proper error handling for API failures.",
        "priority": "medium",
        "dependencies": [
          "4"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "9",
        "title": "AI Streaming UI Components",
        "description": "Create real-time streaming chat interface for AI fortune interpretation",
        "details": "Implement components/chat/fortune-stream.tsx using useChat hook from Vercel AI SDK. Create real-time streaming display with typing indicators, message bubbles, and smooth text appearance. Build components/chat/message-bubble.tsx with proper styling for AI responses, markdown support for formatting, and 오행-themed design. Add category selection tabs/buttons for different fortune types (연애운, 재물운, 건강운, etc.). Implement error states, retry functionality, and loading skeletons. Ensure mobile-optimized scrolling and text readability.",
        "testStrategy": "Test streaming performance with various message lengths, verify typing indicators and smooth text rendering, validate category switching functionality, test error handling and retry mechanisms, and ensure mobile UX quality.",
        "priority": "medium",
        "dependencies": [
          "8",
          "5"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "10",
        "title": "Face Reading with MediaPipe Integration",
        "description": "Implement AI-powered 관상 analysis using MediaPipe Face Mesh and geometric calculations",
        "details": "Implement lib/face/analyzer.ts with MediaPipe Face Mesh integration using dynamic imports for bundle optimization. Create lib/face/landmarks.ts with 468-point landmark indices for key facial features (eyes, nose, lips, face contour). Build lib/face/ratios.ts for 삼정 (three zones) calculation, eye/nose/lip measurements, and face shape analysis. Implement components/face/camera-capture.tsx with react-webcam or file input for photo capture. Create components/face/face-analyzer.tsx for processing and components/face/face-result.tsx for displaying measurements. Add lib/prompts/face-reading.ts for 관상-specific AI interpretation. Create app/(main)/face-reading/page.tsx integrating the complete flow.",
        "testStrategy": "Test MediaPipe initialization and landmark detection accuracy, verify geometric calculations for facial ratios, validate camera capture functionality across devices, test face analysis with various photo qualities, and ensure proper integration with AI interpretation system.",
        "priority": "low",
        "dependencies": [
          "5"
        ],
        "status": "pending",
        "subtasks": []
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2025-12-20T05:00:40.923Z",
      "taskCount": 10,
      "completedCount": 7,
      "tags": [
        "master"
      ]
    }
  }
}